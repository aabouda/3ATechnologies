<div class="right_col" role="main"  data-ng-init="onLoad()">
  <div class="">
    <div class="page-title">
      <div class="title_left">
        <h3>Projet <small>{{nameProject}}</small></h3>
      </div>

    </div>

    <div class="clearfix"></div>

    <div class="row">
      <div class="col-md-12">
        <div class="x_panel">
          <div class="x_content">

               <div ng-include="'../tmp/top_menu.html'"></div>  
                 
                 
                 <div id="step-1">
                <u><h2 class="StepTitle">Gestion des risques</h2></u><br><br>
                
            <div class="row">
              <div class="col-md-12">
                <div class="x_panel">
                  
                  <div class="x_content">
                    <div class="row">
                      <div class="col-sm-3 mail_list_column">
                        <button id="compose" class="btn btn-sm btn-success btn-block" type="button" ng-click="ajouterRisques()">Ajouter Risques</button>
                        
                        <dir-pagination-controls max-size="10" direction-links="true" boundary-links="true" class="dataTables_paginate paging_simple_numbers"> </dir-pagination-controls>
                        
                        
	                      <table class="table table-hover">
	                      <tbody>
	                        <tr dir-paginate="Risques in allrisques|orderBy:sortKey:reverse|filter:search1|itemsPerPage:10">
	                          <td >
		                          <a >
			                          <div class="mail_list " ng-click="afficherRisque(Risques.idRisque)">
			                            <div class="right">
			                              	<h4>
			                              		<span ng-if="Risques.criticite<5"> <i class="fa fa-exclamation-triangle bg-green"></i></span>
			                              		<span ng-if="Risques.criticite>4 && Risques.criticite<11"> <i class="fa fa-exclamation-triangle bg-yellow"></i></span>
			                              		<span ng-if="Risques.criticite>10 && Risques.criticite<16"> <i class="fa fa-exclamation-triangle bg-orange"></i></span>
			                              		<span ng-if="Risques.criticite>15"> <i class="fa fa-exclamation-triangle bg-red"></i></span>
			                              		
			                              		 - {{Risques.risque }} - {{Risques.criticite }} - 
			                              	</h4>
			                            </div>
			                          </div>
		                        	</a>
	                        	</td>
	                        </tr>
	                      </tbody>
	                    </table>
                        <dir-pagination-controls max-size="5" direction-links="true" boundary-links="true" class="dataTables_paginate paging_simple_numbers"> </dir-pagination-controls>
                        
                      </div>
                      <!-- /MAIL LIST -->

                      <!-- CONTENT MAIL -->
                      <div class="col-sm-9 mail_view">
                        <div class="inbox-body">
                          
                          <div class="view-mail">
                          
                          						<span ng-if="criticite<5"> <i class="fa fa-3x fa-exclamation-triangle bg-green"></i></span>
			                              		<span ng-if="criticite>4 && criticite<11"> <i class="fa fa-3x fa-exclamation-triangle bg-yellow"></i></span>
			                              		<span ng-if="criticite>10 && criticite<16"> <i class="fa fa-3x fa-exclamation-triangle bg-orange"></i></span>
			                              		<span ng-if="criticite>15"> <i class="fa fa-3x fa-exclamation-triangle bg-red"></i></span>
			                              		
			                              		
                          
                          
                          	 <form class="form-horizontal form-label-left"  >
			                  <div class="form-group">
			                    <label class="control-label col-md-2 col-sm-1 col-xs-12" for="resumeSp">Risque <span class="required">*</span>
			                    </label>
			                    <div class="col-md-9 col-sm-12 col-xs-12">
			                      <input type="text" ng-model="risque" id="risque" required="required" class="form-control col-md-7 col-xs-12">
			                    </div>
			                  </div>
			                  
			                  
			                  <div class="form-group">
			                    <label class="control-label col-md-2 col-sm-1 col-xs-12" for="resumeSp">Impact <span class="required">*</span>
			                    </label>
			                    <div class="col-md-9 col-sm-12 col-xs-12">
			                      
			                      
			                       <select id="impact" ng-model="impact" ng-change="CalculCriticite()">
										<option  value="1">1</option>
										<option  value="2">2</option>
										<option  value="3">3</option>
										<option  value="4">4</option>
										<option  value="5">5</option>
								</select>
								
								
			                    </div>
			                  </div>
			                  
			                  
			                  <div class="form-group">
			                    <label class="control-label col-md-2 col-sm-1 col-xs-12" for="resumeSp">Probabilite <span class="required">*</span>
			                    </label>
			                    <div class="col-md-9 col-sm-12 col-xs-12">
			                    
			                    <select id="probabilite" ng-model="probabilite"  ng-change="CalculCriticite()">
										<option  value="1">1</option>
										<option  value="2">2</option>
										<option  value="3">3</option>
										<option  value="4">4</option>
										<option  value="5">5</option>
								</select>
			                    
			                    
			                     
			                    </div>
			                  </div>
			                 
			                
			                  
			                  
			                   <div class="form-group">
			                    <label class="control-label col-md-2 col-sm-1 col-xs-12" for="resumeSp">Criticite <span class="required">*</span>
			                    </label>
			                    <div class="col-md-9 col-sm-12 col-xs-12">
			                      <input type="text" ng-model="criticite" id="criticite" required="required" class="form-control col-md-7 col-xs-12" readonly>
			                    </div>
			                  </div>
			                  
			                 
			                  <div class="form-group">
			                    <label for="detailsSp" class="control-label col-md-2 col-sm-1 col-xs-12">Description</label>
			                    <div class="col-md-9 col-sm-6 col-xs-12">
			                      <textarea ng-model="detailsRs" id="detailsRs" class="form-control col-md-7 col-xs-12" rows="5"></textarea>
			                    </div>
			                  </div>
			                  
			                  
			                  
			                  
			                  
			                  
			                  <br><br>
			                  <div class="form-group" >
			                    <div class="col-md-12 col-sm-12 col-xs-12" align="right">
			                       <button ng-click="validerUpdateRisque(idRisque)" class="btn btn-primary" >Valider Modification</button>
			                    </div>
			                  </div>
			                  
			                
			                  
			                  <h2 class="StepTitle">Liste des Risques</h2>
			                  
			                  
			                  
								<button ng-click="ajouterDeclarationRisque(idRisque)" class="btn btn-primary" ><i class="fa fa-plus">Affecter un risque</i></button>
								
			                  
			                   <table  class="table table-striped projects table-bordered">
					              <thead>
						              <tr>
						                <th style="width: 20%">Resume</th>
						                <th>Date Debut</th>
						                <th>Date Fin</th>
						                <th>Statut</th>
						                <th >Commentaire</th>
						                <th>Action</th>
						              </tr>
					              </thead>
              					  <tbody>
              						<tr dir-paginate="dr in allDeclarationRisque|orderBy:sortKey:reverse|filter:search1|itemsPerPage:10">
						                <td> {{dr.resume}} </td>
						                <td> {{dr.dateDebutRisque | date:'dd-MM-yyyy'}} </td>
						                <td> {{dr.dateFinRisque | date:'dd-MM-yyyy'}} </td>
						                <td> <span ng-if="dr.statut == 0 "> A faire </span>
											<span ng-if="dr.statut == 3 "> Complete </span> 
										</td>
										<td> {{dr.commentaires}} </td>
						                <td>
						                	<button ng-click="cloturer(dr.idDeclarationRisque)" class="btn btn-danger btn-xs" ng-if="dr.statut == 0 ">
						                		<i  class="fa fa-power-off"></i>
						                	</button>
						                	
						                	<button ng-click="ouvrir(dr.idDeclarationRisque)" class="btn btn-success btn-xs" ng-if="dr.statut == 3 ">
						                		<i  class="fa fa-key"></i>
						                	</button>
						                	
						                	
						                </td>
              						</tr>
            					</tbody>
           					 </table>
			                  
			                  
			                  
			                  
			                </form>
                          
                          </div>
                        </div>
                      </div>
                      <!-- /CONTENT MAIL -->
                      
                    </div>
                  </div>
                </div>
             
             
             
              </div>
            </div>
              
              
              
              <div class="modal fade" id="myModaldees" tabindex="-1" role="dialog"
					aria-labelledby="myModalLabel" aria-hidden="true">
					<div class="modal-dialog" style="width: 861px;">
						<div class="modal-content">
							<div class="modal-header">
								<button type="button" class="close" data-dismiss="modal"
									aria-hidden="true">&times;</button>
								<h4 class="modal-title" id="exampleModalLabel">Ajouter Risques</h4>
							</div>
							<div class="modal-body">
								<div class="panel panel-default">
									<div class="panel-heading"></div>
									<div class="panel-body">
										<div class="">
											
											<form class="form-horizontal form-label-left"  >
			                  <div class="form-group">
			                    <label class="control-label col-md-2 col-sm-1 col-xs-12" for="resumeSp">Risque <span class="required">*</span>
			                    </label>
			                    <div class="col-md-9 col-sm-12 col-xs-12">
			                      <input type="text" ng-model="risqueNV" id="risqueNV" required="required" class="form-control col-md-7 col-xs-12">
			                    </div>
			                  </div>
			                  
			                  
			                  <div class="form-group">
			                    <label class="control-label col-md-2 col-sm-1 col-xs-12" for="resumeSp">Impact <span class="required">*</span>
			                    </label>
			                    <div class="col-md-9 col-sm-12 col-xs-12">
			                      
			                      
			                       <select id="impactNV" ng-model="impactNV" ng-change="CalculCriticiteNV()">
										<option  value="1">1</option>
										<option  value="2">2</option>
										<option  value="3">3</option>
										<option  value="4">4</option>
										<option  value="5">5</option>
								</select>
								
								
			                    </div>
			                  </div>
			                  
			                  
			                  <div class="form-group">
			                    <label class="control-label col-md-2 col-sm-1 col-xs-12" for="resumeSp">Probabilite <span class="required">*</span>
			                    </label>
			                    <div class="col-md-9 col-sm-12 col-xs-12">
			                    
			                    <select id="probabiliteNV" ng-model="probabiliteNV"  ng-change="CalculCriticiteNV()">
										<option  value="1">1</option>
										<option  value="2">2</option>
										<option  value="3">3</option>
										<option  value="4">4</option>
										<option  value="5">5</option>
								</select>
			                    
			                    
			                     
			                    </div>
			                  </div>
			                 
			                
			                  
			                  
			                   <div class="form-group">
			                    <label class="control-label col-md-2 col-sm-1 col-xs-12" for="resumeSp">Criticite <span class="required">*</span>
			                    </label>
			                    <div class="col-md-9 col-sm-12 col-xs-12">
			                      <input type="text" ng-model="criticiteNV" id="criticiteNV" required="required" class="form-control col-md-7 col-xs-12" readonly>
			                    </div>
			                  </div>
			                  
			                 
			                  <div class="form-group">
			                    <label for="detailsSp" class="control-label col-md-2 col-sm-1 col-xs-12">Description</label>
			                    <div class="col-md-9 col-sm-6 col-xs-12">
			                      <textarea ng-model="detailsRsNV" id="detailsRsNV" class="form-control col-md-7 col-xs-12" rows="5"></textarea>
			                    </div>
			                  </div>
			                  
			                  
			                  
			                 
			                  
			                  
			                  
			                  <br><br>
			                  <div class="form-group" >
			                    <div class="col-md-12 col-sm-12 col-xs-12" align="right">
			                       <button ng-click="validerAjouterRisques()" class="btn btn-primary" >Valider</button>
			                    </div>
			                  </div>
			                </form>
                          
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>

              
              
              
              
              
              
              
              
              
              
              
              
              <div class="modal fade" id="myModaldeesUS" tabindex="-1" role="dialog"
					aria-labelledby="myModalLabel" aria-hidden="true">
					<div class="modal-dialog" style="width: 861px;">
						<div class="modal-content">
							<div class="modal-header">
								<button type="button" class="close" data-dismiss="modal"
									aria-hidden="true">&times;</button>
								<h4 class="modal-title" id="exampleModalLabel">Creer un risque</h4>
							</div>
							<div class="modal-body">
								<div class="panel panel-default">
									<div class="panel-heading"></div>
									<div class="panel-body">
										<div class="">
											
											<form class="form-horizontal form-label-left"  >
			                 
			                  
			                  
			                   <div class="form-group">
			                    <label class="control-label col-md-2 col-sm-1 col-xs-12" for="resumeSp">Desciption <span class="required">*</span>
			                    </label>
			                    <div class="col-md-9 col-sm-12 col-xs-12">
			                      <input type="text" ng-model="resumeNV" id="resumeNV" required="required" class="form-control col-md-7 col-xs-12">
			                    </div>
			                  </div>
			                  
			                 
			                  
			                  
			                   <div class="form-group">
			                    <label class="control-label col-md-2 col-sm-1 col-xs-12" for="resumeSp">Details  <span class="required">*</span>
			                    </label>
			                    <div class="col-md-9 col-sm-12 col-xs-12">
			                      <textarea ng-model="commentairesNV" id="commentairesNV" class="form-control col-md-7 col-xs-12" rows="5"></textarea>
			                    </div>
			                  </div>
			                  
			                  
			                  
			                  
			                  
			                  
			                  
			                  <br><br>
			                  <div class="form-group" >
			                    <div class="col-md-12 col-sm-12 col-xs-12" align="right">
			                       <button ng-click="AddDeclarationRisque()" class="btn btn-primary" >Valider</button>
			                    </div>
			                  </div>
			                </form>
                          
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>

              
               <div ng-include="'../tmp/message.html'"></div>  
              
              
              
              
              
              
              </div>
         
          
           
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
